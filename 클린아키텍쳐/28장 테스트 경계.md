### 28장 테스트 경계

-----

> 테스트는 시스템의 일부이며, 아키텍처에도 관여한다.



### 시스템 컴포넌트인 테스트

-----

- 테스트는 의존성 규칙을 따른다.

- 실제로 테스트는 아키텍처에서 가장 바깥쪽 원으로 생각할 수 있다.

  (시스템 컴포넌트를 향해 항상 원의 안쪽으로 의존)

- 테스트는 독립적으로 배포 가능하다.

- 테스트의 역할은 운영이 아닌 개발을 지원하는 데 있다.



### 테스트를 고려한 설계

-----

- 테스트가 시스템의 설계와 잘 통합되지 않으면, 시스템의 변경이 어려워진다.

- 시스템과 강하게 결합된 테스트는 시스템 변경시 함께 변경되어야 한다. (<u>깨지기 쉬운 테스트 문제</u>)

  -> 이렇게 되면 시스템의 간단한 변경이 수많은 테스트 실패를 낳으면서 개발자가 시스템 변경을 꺼려하게 된다....

  -> 따라서, <B>변동성이 있는 것에 의존하지 말고 테스트를 고려</B>해서 설계해야 한다.



### 테스트 API

-----

- 테스트를 고려한 설계를 위해서는 모든 업무 규칙을 검증하는 테스트 API를 만들면 된다.

- 이 API는 사용자 인터페이스가 사용하는 인터랙터와 인터페이스 어댑터들의 상위 집합이 될 것이다.
- 테스트 API는 테스트 구조를 애플리케이션 구조로부터 결합을 분리하는 게 목표다.

- 테스트 API를 통해서 애플리케이션 구조와 테스트는 각각 독립적으로 리팩토링될 수 있어야 한다.
- 보안을 위해서 테스트 API 중 위험한 부분의 구현부는 독립적으로 분리하자.