### 13장 컴포넌트 응집도

> 이 장에서는 컴포넌트 응집도와 관련된 세 가지 원칙을 논의한다.



1. REP: 재사용/릴리스 등가 원칙

   > 재사용 단위는 릴리스 단위와 같다.

   - 지난 십년은 메이븐(Maven), 라이닝언(Leiningen), RVM같은 모듈 관리 도구가 우후죽순 등장하며 점점 중요해짐

     -> 재사용 가능한 컴포넌트나 컴포넌트 라이브러리가 많이 만들어졌기 때문

   - 소프트웨어 개발자들은 새로운 버전이 언제 출시됐고, 무엇이 변했는지를 알아야 함

   - 릴리즈 절차에는 적절한 공지와 함께 릴리스 문서 작성도 포함되어야 함

     -> 개발자에게 기준을 정해줄 수 있음

   - 이 원칙을 소프트웨어 설계와 아키텍처 관점에서 보면 단일 컴포넌트는 응집성 높은 클래스와 모듈로 구성되면 안됨

   - 컴포넌트를 구성하는 모든 모듈은 서로 공유하는 중요한 테마나 목적이 있어야 함

   - 이 원칙을 어기면 '이치에 맞지' 않게 된다

   - 이 원칙의 약점은 CCP와 CRP 원칙을 통해 보완될 수 있다

   

2. CCP: 공통 폐쇄 원칙

   > 동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라.
   >
   > 서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하라.

   - 이 원칙은 단일 책임 원칙(SRP)을 컴포넌트 관점에서 다시 쓴 것

   - 단일 컴포넌트는 변경의 이유가 여러 개 있어서는 안됨

   - 여러 컴포넌트에서 변경이 발생하는 것보다 단일 컴포넌트에서 모든 변경이 발생하는 것이 낫다

     -> 해당 컴포넌트만 재배포하면 되기 때문

   - 물리적 또는 개념적으로 강하게 결합되어 항상 함께 변경되는 클래스들은 하나의 컴포넌트에 속해야 함

     -> 작업량 최소화

   - 개방 폐쇄 원칙(OCP)과도 관련 있음

   - 이 원칙에서는 동일한 유형의 변경에 대해 닫혀 있는 클래스들을 하나의 컴포넌트로 묶음으로서 OCP에서 얻은 교훈을 확대 적용함

     

     <B>SRP와의 유사성</B>

     - CCP는 컴포넌트 수준의 SRP이다

     - 서로 다른 이유로 변경되는 클래스를 서로 다른 컴포넌트로 분리할 것

       

3. CRP: 공통 재사용 원칙

   > 컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.

   - 같이 재사용되는 경향이 있는 클래스와 모듈들은 같은 컴포넌트에 포함해야 한다

   - 재사용되는 클래스들은 같은 컴포넌트에 포함되어 있어야 함

   - 동일한 컴포넌트로 묶어서는 안되는 클래스도 알려준다

   - 강하게 결합되지 않은 클래스들을 동일한 컴포넌트에 위치시켜서는 안된다고 말함

     

     <B>ISP와의 관계</B>

     - CRP는 인터페이스 분리 원칙(ISP)의 포괄적인 버전이다

     - 사용하지 않는 클래스를 가진 컴포넌트에 의존하지 말라고 조언한다

       

   <B>컴포넌트 응집도에 대한 균형 다이어그램</B>

   - REP - CCP는 포함 원칙이다 (즉, 컴포넌트를 더욱 크게 만든다)

   - CRP는 배제 원칙이다 (즉, 컴포넌트를 작게 만든다)

     -> 세 원칙들의 균형을 잘 찾아야 함



<B>결론</B>

- 어느 클래스들을 묶어서 컴포넌트로 만들지 결정할 때 재사용성과 개발 가능성의 균형을 잘 잡아야 한다
- 이 균형은 유동적이다

